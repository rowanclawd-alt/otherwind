<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shape Builder â€” Otherwind</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Helvetica Neue', -apple-system, sans-serif;
      background: #050505;
      color: #e8f5e8;
      min-height: 100vh;
      overflow: hidden;
    }
    
    .app {
      display: flex;
      height: 100vh;
    }
    
    /* Sidebar */
    .sidebar {
      width: 320px;
      background: #0a0f0a;
      border-right: 1px solid #1a2f1a;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    
    .logo {
      font-size: 1.2rem;
      font-weight: 300;
      margin-bottom: 30px;
      color: #22c55e;
    }
    
    .logo span { opacity: 0.5; }
    
    .section {
      margin-bottom: 25px;
    }
    
    .section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #666;
      margin-bottom: 12px;
    }
    
    /* Shape Grid */
    .shape-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
    
    .shape-btn {
      aspect-ratio: 1;
      background: #111;
      border: 2px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      padding: 10px;
    }
    
    .shape-btn:hover { background: #1a1a1a; }
    .shape-btn.active { border-color: #22c55e; background: #0f1f0f; }
    
    .shape-btn svg {
      width: 100%;
      height: 100%;
      fill: #4ade80;
    }
    
    /* Texture Options */
    .texture-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
    }
    
    .texture-btn {
      padding: 8px 12px;
      background: #111;
      border: 1px solid #222;
      border-radius: 6px;
      color: #888;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .texture-btn:hover { background: #1a1a1a; color: #fff; }
    .texture-btn.active { border-color: #22c55e; color: #22c55e; background: #0f1f0f; }
    
    /* Color Controls */
    .color-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    
    .color-label {
      font-size: 12px;
      color: #888;
      width: 70px;
    }
    
    .color-input {
      flex: 1;
      height: 36px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #111;
      padding: 4px;
    }
    
    .color-input::-webkit-color-swatch-wrapper { padding: 0; }
    .color-input::-webkit-color-swatch { border-radius: 4px; border: none; }
    
    /* Sliders */
    .slider-row {
      margin-bottom: 15px;
    }
    
    .slider-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }
    
    .slider-label {
      font-size: 12px;
      color: #888;
    }
    
    .slider-value {
      font-size: 12px;
      color: #22c55e;
    }
    
    input[type="range"] {
      width: 100%;
      height: 6px;
      -webkit-appearance: none;
      background: #222;
      border-radius: 3px;
      outline: none;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: #22c55e;
      border-radius: 50%;
      cursor: pointer;
    }
    
    /* Buttons */
    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 8px;
    }
    
    .btn-primary {
      background: #22c55e;
      color: #000;
      font-weight: 500;
    }
    
    .btn-primary:hover { background: #4ade80; }
    
    .btn-secondary {
      background: #1a1a1a;
      color: #888;
      border: 1px solid #333;
    }
    
    .btn-secondary:hover { background: #222; color: #fff; }
    
    .btn-random {
      background: linear-gradient(135deg, #22c55e, #0891b2);
      color: #000;
      font-weight: 500;
    }
    
    .btn-random:hover { opacity: 0.9; }
    
    /* Saved Presets */
    .presets-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 10px;
    }
    
    .preset-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background: #111;
      border-radius: 6px;
      margin-bottom: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .preset-item:hover { background: #1a1a1a; }
    
    .preset-name {
      font-size: 13px;
      color: #ccc;
    }
    
    .preset-actions {
      display: flex;
      gap: 6px;
    }
    
    .preset-action {
      width: 24px;
      height: 24px;
      border: none;
      background: #222;
      border-radius: 4px;
      color: #666;
      cursor: pointer;
      font-size: 12px;
    }
    
    .preset-action:hover { background: #333; color: #fff; }
    .preset-action.delete:hover { background: #7f1d1d; color: #fca5a5; }
    
    /* Preview Area */
    .preview {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #canvas-container {
      width: 100%;
      height: 100%;
    }
    
    canvas { display: block; }
    
    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    
    .modal-overlay.active { display: flex; }
    
    .modal {
      background: #0a0f0a;
      border: 1px solid #1a2f1a;
      border-radius: 12px;
      padding: 24px;
      width: 400px;
      max-width: 90%;
    }
    
    .modal-title {
      font-size: 18px;
      margin-bottom: 16px;
      color: #22c55e;
    }
    
    .modal-input {
      width: 100%;
      padding: 12px;
      background: #111;
      border: 1px solid #222;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      margin-bottom: 16px;
    }
    
    .modal-input:focus {
      outline: none;
      border-color: #22c55e;
    }
    
    .modal-buttons {
      display: flex;
      gap: 10px;
    }
    
    .modal-buttons .btn { flex: 1; margin: 0; }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #22c55e;
      color: #000;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      transition: transform 0.3s;
      z-index: 200;
    }
    
    .toast.show { transform: translateX(-50%) translateY(0); }
  </style>
</head>
<body>
  <div class="app">
    <div class="sidebar">
      <div class="logo">otherwind <span>/ shapes</span></div>
      
      <div class="section">
        <div class="section-title">Shape</div>
        <div class="shape-grid" id="shape-grid"></div>
      </div>
      
      <div class="section">
        <div class="section-title">Texture</div>
        <div class="texture-grid" id="texture-grid"></div>
      </div>
      
      <div class="section">
        <div class="section-title">Colors</div>
        <div class="color-row">
          <span class="color-label">Primary</span>
          <input type="color" class="color-input" id="color-primary" value="#22c55e">
        </div>
        <div class="color-row">
          <span class="color-label">Secondary</span>
          <input type="color" class="color-input" id="color-secondary" value="#4ade80">
        </div>
        <div class="color-row">
          <span class="color-label">Glow</span>
          <input type="color" class="color-input" id="color-glow" value="#22c55e">
        </div>
      </div>
      
      <div class="section">
        <div class="section-title">Settings</div>
        <div class="slider-row">
          <div class="slider-header">
            <span class="slider-label">Glow Intensity</span>
            <span class="slider-value" id="glow-value">50%</span>
          </div>
          <input type="range" id="glow-intensity" min="0" max="100" value="50">
        </div>
        <div class="slider-row">
          <div class="slider-header">
            <span class="slider-label">Size</span>
            <span class="slider-value" id="size-value">100%</span>
          </div>
          <input type="range" id="size-slider" min="50" max="150" value="100">
        </div>
        <div class="slider-row">
          <div class="slider-header">
            <span class="slider-label">Rotation Speed</span>
            <span class="slider-value" id="rotation-value">50%</span>
          </div>
          <input type="range" id="rotation-speed" min="0" max="100" value="50">
        </div>
      </div>
      
      <div class="section">
        <button class="btn btn-random" onclick="randomize()">ðŸŽ² Randomize</button>
        <button class="btn btn-primary" onclick="openSaveModal()">ðŸ’¾ Save Preset</button>
        <button class="btn btn-secondary" onclick="exportConfig()">ðŸ“‹ Copy Config</button>
      </div>
      
      <div class="section" style="flex: 1; display: flex; flex-direction: column;">
        <div class="section-title">Saved Presets</div>
        <div class="presets-list" id="presets-list"></div>
      </div>
    </div>
    
    <div class="preview">
      <div id="canvas-container"></div>
    </div>
  </div>
  
  <!-- Save Modal -->
  <div class="modal-overlay" id="save-modal">
    <div class="modal">
      <div class="modal-title">Save Preset</div>
      <input type="text" class="modal-input" id="preset-name" placeholder="Enter preset name...">
      <div class="modal-buttons">
        <button class="btn btn-secondary" onclick="closeSaveModal()">Cancel</button>
        <button class="btn btn-primary" onclick="savePreset()">Save</button>
      </div>
    </div>
  </div>
  
  <!-- Toast -->
  <div class="toast" id="toast"></div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Shape definitions
    const SHAPES = [
      { id: 'faceted', name: 'Faceted', icon: 'â—†' },
      { id: 'ring', name: 'Ring', icon: 'â—‹' },
      { id: 'blob', name: 'Blob', icon: 'â—' },
      { id: 'orb', name: 'Orb', icon: 'â—' },
      { id: 'wireframe', name: 'Wire', icon: 'â—Ž' },
      { id: 'triangle', name: 'Triangle', icon: 'â–³' },
      { id: 'diamond', name: 'Diamond', icon: 'â—‡' },
      { id: 'cube', name: 'Cube', icon: 'â–¢' },
      { id: 'torus', name: 'Torus', icon: 'â—Œ' },
    ];
    
    const TEXTURES = [
      { id: 'flat', name: 'Flat' },
      { id: 'metallic', name: 'Metallic' },
      { id: 'glass', name: 'Glass' },
      { id: 'glossy', name: 'Glossy' },
      { id: 'matte', name: 'Matte' },
      { id: 'wireframe', name: 'Wireframe' },
    ];
    
    // State
    let state = {
      shape: 'faceted',
      texture: 'flat',
      colorPrimary: '#22c55e',
      colorSecondary: '#4ade80',
      colorGlow: '#22c55e',
      glowIntensity: 50,
      size: 100,
      rotationSpeed: 50,
    };
    
    // Three.js setup
    let scene, camera, renderer, currentMesh, glowMesh;
    let mouseX = 0, mouseY = 0;
    
    function initThree() {
      const container = document.getElementById('canvas-container');
      
      scene = new THREE.Scene();
      
      camera = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 0.1, 1000);
      camera.position.z = 5;
      
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);
      
      // Lighting
      const ambient = new THREE.AmbientLight(0xffffff, 0.4);
      scene.add(ambient);
      
      const directional = new THREE.DirectionalLight(0xffffff, 0.8);
      directional.position.set(5, 5, 5);
      scene.add(directional);
      
      const backLight = new THREE.DirectionalLight(0x22c55e, 0.3);
      backLight.position.set(-5, -5, -5);
      scene.add(backLight);
      
      // Mouse movement
      document.addEventListener('mousemove', (e) => {
        mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
        mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
      });
      
      // Resize
      window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
      });
      
      updateShape();
      animate();
    }
    
    function createGeometry(shapeId) {
      const scale = state.size / 100;
      
      switch(shapeId) {
        case 'faceted':
          return new THREE.IcosahedronGeometry(1.2 * scale, 0);
        case 'ring':
          return new THREE.TorusGeometry(1 * scale, 0.1 * scale, 16, 100);
        case 'blob':
          const blob = new THREE.SphereGeometry(1 * scale, 32, 32);
          // Distort vertices for blob effect
          const positions = blob.attributes.position;
          for (let i = 0; i < positions.count; i++) {
            const x = positions.getX(i);
            const y = positions.getY(i);
            const z = positions.getZ(i);
            const noise = Math.sin(x * 3) * Math.cos(y * 3) * Math.sin(z * 3) * 0.15;
            positions.setXYZ(i, x * (1 + noise), y * (1 + noise * 0.8), z * (1 + noise * 1.2));
          }
          return blob;
        case 'orb':
          return new THREE.SphereGeometry(1 * scale, 64, 64);
        case 'wireframe':
          return new THREE.IcosahedronGeometry(1 * scale, 1);
        case 'triangle':
          return new THREE.TetrahedronGeometry(1.2 * scale, 0);
        case 'diamond':
          return new THREE.OctahedronGeometry(1 * scale, 0);
        case 'cube':
          return new THREE.BoxGeometry(1.4 * scale, 1.4 * scale, 1.4 * scale);
        case 'torus':
          return new THREE.TorusKnotGeometry(0.7 * scale, 0.25 * scale, 100, 16);
        default:
          return new THREE.SphereGeometry(1 * scale, 32, 32);
      }
    }
    
    function createMaterial(textureId) {
      const color = new THREE.Color(state.colorPrimary);
      const secondary = new THREE.Color(state.colorSecondary);
      
      switch(textureId) {
        case 'flat':
          return new THREE.MeshStandardMaterial({
            color: color,
            roughness: 0.7,
            metalness: 0.1,
          });
        case 'metallic':
          return new THREE.MeshStandardMaterial({
            color: color,
            roughness: 0.2,
            metalness: 0.9,
            envMapIntensity: 1,
          });
        case 'glass':
          return new THREE.MeshPhysicalMaterial({
            color: color,
            roughness: 0,
            metalness: 0,
            transmission: 0.9,
            thickness: 0.5,
            transparent: true,
            opacity: 0.7,
          });
        case 'glossy':
          return new THREE.MeshPhongMaterial({
            color: color,
            specular: secondary,
            shininess: 100,
          });
        case 'matte':
          return new THREE.MeshLambertMaterial({
            color: color,
          });
        case 'wireframe':
          return new THREE.MeshBasicMaterial({
            color: color,
            wireframe: true,
          });
        default:
          return new THREE.MeshStandardMaterial({ color: color });
      }
    }
    
    function updateShape() {
      // Remove existing mesh
      if (currentMesh) {
        scene.remove(currentMesh);
        currentMesh.geometry.dispose();
        currentMesh.material.dispose();
      }
      if (glowMesh) {
        scene.remove(glowMesh);
        glowMesh.geometry.dispose();
        glowMesh.material.dispose();
      }
      
      // Create new mesh
      const geometry = createGeometry(state.shape);
      const material = createMaterial(state.texture);
      currentMesh = new THREE.Mesh(geometry, material);
      scene.add(currentMesh);
      
      // Add glow effect
      if (state.glowIntensity > 0) {
        const glowGeom = geometry.clone();
        const glowScale = 1.05 + (state.glowIntensity / 500);
        glowGeom.scale(glowScale, glowScale, glowScale);
        
        const glowMat = new THREE.MeshBasicMaterial({
          color: new THREE.Color(state.colorGlow),
          transparent: true,
          opacity: state.glowIntensity / 200,
          side: THREE.BackSide,
        });
        
        glowMesh = new THREE.Mesh(glowGeom, glowMat);
        scene.add(glowMesh);
      }
    }
    
    function animate() {
      requestAnimationFrame(animate);
      
      const speed = state.rotationSpeed / 1000;
      
      if (currentMesh) {
        currentMesh.rotation.y += speed;
        currentMesh.rotation.x = mouseY * 0.3;
        currentMesh.rotation.z = mouseX * 0.1;
      }
      
      if (glowMesh) {
        glowMesh.rotation.copy(currentMesh.rotation);
      }
      
      camera.position.x = mouseX * 0.5;
      camera.position.y = -mouseY * 0.3;
      camera.lookAt(0, 0, 0);
      
      renderer.render(scene, camera);
    }
    
    // UI Setup
    function setupUI() {
      // Shape grid
      const shapeGrid = document.getElementById('shape-grid');
      SHAPES.forEach(shape => {
        const btn = document.createElement('button');
        btn.className = `shape-btn ${state.shape === shape.id ? 'active' : ''}`;
        btn.innerHTML = `<span style="font-size: 24px">${shape.icon}</span>`;
        btn.title = shape.name;
        btn.onclick = () => selectShape(shape.id);
        shapeGrid.appendChild(btn);
      });
      
      // Texture grid
      const textureGrid = document.getElementById('texture-grid');
      TEXTURES.forEach(tex => {
        const btn = document.createElement('button');
        btn.className = `texture-btn ${state.texture === tex.id ? 'active' : ''}`;
        btn.textContent = tex.name;
        btn.onclick = () => selectTexture(tex.id);
        textureGrid.appendChild(btn);
      });
      
      // Color inputs
      document.getElementById('color-primary').addEventListener('input', (e) => {
        state.colorPrimary = e.target.value;
        updateShape();
      });
      
      document.getElementById('color-secondary').addEventListener('input', (e) => {
        state.colorSecondary = e.target.value;
        updateShape();
      });
      
      document.getElementById('color-glow').addEventListener('input', (e) => {
        state.colorGlow = e.target.value;
        updateShape();
      });
      
      // Sliders
      document.getElementById('glow-intensity').addEventListener('input', (e) => {
        state.glowIntensity = parseInt(e.target.value);
        document.getElementById('glow-value').textContent = state.glowIntensity + '%';
        updateShape();
      });
      
      document.getElementById('size-slider').addEventListener('input', (e) => {
        state.size = parseInt(e.target.value);
        document.getElementById('size-value').textContent = state.size + '%';
        updateShape();
      });
      
      document.getElementById('rotation-speed').addEventListener('input', (e) => {
        state.rotationSpeed = parseInt(e.target.value);
        document.getElementById('rotation-value').textContent = state.rotationSpeed + '%';
      });
      
      loadPresets();
    }
    
    function selectShape(id) {
      state.shape = id;
      document.querySelectorAll('.shape-btn').forEach((btn, i) => {
        btn.classList.toggle('active', SHAPES[i].id === id);
      });
      updateShape();
    }
    
    function selectTexture(id) {
      state.texture = id;
      document.querySelectorAll('.texture-btn').forEach((btn, i) => {
        btn.classList.toggle('active', TEXTURES[i].id === id);
      });
      updateShape();
    }
    
    function randomize() {
      // Random shape
      const randomShape = SHAPES[Math.floor(Math.random() * SHAPES.length)];
      selectShape(randomShape.id);
      
      // Random texture
      const randomTexture = TEXTURES[Math.floor(Math.random() * TEXTURES.length)];
      selectTexture(randomTexture.id);
      
      // Random colors
      const hue = Math.random() * 360;
      const primary = `hsl(${hue}, 70%, 50%)`;
      const secondary = `hsl(${(hue + 30) % 360}, 60%, 60%)`;
      const glow = `hsl(${hue}, 80%, 45%)`;
      
      document.getElementById('color-primary').value = hslToHex(hue, 70, 50);
      document.getElementById('color-secondary').value = hslToHex((hue + 30) % 360, 60, 60);
      document.getElementById('color-glow').value = hslToHex(hue, 80, 45);
      
      state.colorPrimary = document.getElementById('color-primary').value;
      state.colorSecondary = document.getElementById('color-secondary').value;
      state.colorGlow = document.getElementById('color-glow').value;
      
      // Random settings
      state.glowIntensity = Math.floor(Math.random() * 100);
      state.size = 80 + Math.floor(Math.random() * 40);
      state.rotationSpeed = 20 + Math.floor(Math.random() * 60);
      
      document.getElementById('glow-intensity').value = state.glowIntensity;
      document.getElementById('glow-value').textContent = state.glowIntensity + '%';
      document.getElementById('size-slider').value = state.size;
      document.getElementById('size-value').textContent = state.size + '%';
      document.getElementById('rotation-speed').value = state.rotationSpeed;
      document.getElementById('rotation-value').textContent = state.rotationSpeed + '%';
      
      updateShape();
      showToast('Randomized! ðŸŽ²');
    }
    
    function hslToHex(h, s, l) {
      s /= 100;
      l /= 100;
      const a = s * Math.min(l, 1 - l);
      const f = n => {
        const k = (n + h / 30) % 12;
        const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
        return Math.round(255 * color).toString(16).padStart(2, '0');
      };
      return `#${f(0)}${f(8)}${f(4)}`;
    }
    
    // Presets
    function openSaveModal() {
      document.getElementById('save-modal').classList.add('active');
      document.getElementById('preset-name').focus();
    }
    
    function closeSaveModal() {
      document.getElementById('save-modal').classList.remove('active');
      document.getElementById('preset-name').value = '';
    }
    
    function savePreset() {
      const name = document.getElementById('preset-name').value.trim();
      if (!name) {
        showToast('Please enter a name');
        return;
      }
      
      const presets = JSON.parse(localStorage.getItem('otherwind-presets') || '[]');
      const preset = {
        id: Date.now(),
        name: name,
        config: { ...state },
      };
      
      presets.push(preset);
      localStorage.setItem('otherwind-presets', JSON.stringify(presets));
      
      closeSaveModal();
      loadPresets();
      showToast('Preset saved! ðŸ’¾');
    }
    
    function loadPresets() {
      const presets = JSON.parse(localStorage.getItem('otherwind-presets') || '[]');
      const list = document.getElementById('presets-list');
      list.innerHTML = '';
      
      if (presets.length === 0) {
        list.innerHTML = '<div style="color: #444; font-size: 12px; text-align: center; padding: 20px;">No saved presets yet</div>';
        return;
      }
      
      presets.forEach(preset => {
        const item = document.createElement('div');
        item.className = 'preset-item';
        item.innerHTML = `
          <span class="preset-name">${preset.name}</span>
          <div class="preset-actions">
            <button class="preset-action" onclick="event.stopPropagation(); loadPreset(${preset.id})" title="Load">â†©</button>
            <button class="preset-action delete" onclick="event.stopPropagation(); deletePreset(${preset.id})" title="Delete">Ã—</button>
          </div>
        `;
        item.onclick = () => loadPreset(preset.id);
        list.appendChild(item);
      });
    }
    
    function loadPreset(id) {
      const presets = JSON.parse(localStorage.getItem('otherwind-presets') || '[]');
      const preset = presets.find(p => p.id === id);
      if (!preset) return;
      
      state = { ...preset.config };
      
      // Update UI
      selectShape(state.shape);
      selectTexture(state.texture);
      
      document.getElementById('color-primary').value = state.colorPrimary;
      document.getElementById('color-secondary').value = state.colorSecondary;
      document.getElementById('color-glow').value = state.colorGlow;
      
      document.getElementById('glow-intensity').value = state.glowIntensity;
      document.getElementById('glow-value').textContent = state.glowIntensity + '%';
      document.getElementById('size-slider').value = state.size;
      document.getElementById('size-value').textContent = state.size + '%';
      document.getElementById('rotation-speed').value = state.rotationSpeed;
      document.getElementById('rotation-value').textContent = state.rotationSpeed + '%';
      
      updateShape();
      showToast(`Loaded: ${preset.name}`);
    }
    
    function deletePreset(id) {
      const presets = JSON.parse(localStorage.getItem('otherwind-presets') || '[]');
      const updated = presets.filter(p => p.id !== id);
      localStorage.setItem('otherwind-presets', JSON.stringify(updated));
      loadPresets();
      showToast('Preset deleted');
    }
    
    function exportConfig() {
      const config = JSON.stringify(state, null, 2);
      navigator.clipboard.writeText(config);
      showToast('Config copied to clipboard! ðŸ“‹');
    }
    
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }
    
    // Init
    document.addEventListener('DOMContentLoaded', () => {
      setupUI();
      initThree();
    });
    
    // Handle Enter key in modal
    document.getElementById('preset-name').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') savePreset();
    });
  </script>
</body>
</html>
