<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rowan's Board ‚Äî Otherwind</title>
    <meta name="theme-color" content="#0a1a12">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='10' y='10' width='35' height='35' rx='4' fill='%234fd1a5'/><rect x='55' y='10' width='35' height='35' rx='4' fill='%234fd1a5' opacity='0.6'/><rect x='10' y='55' width='35' height='35' rx='4' fill='%234fd1a5' opacity='0.6'/><rect x='55' y='55' width='35' height='35' rx='4' fill='%234fd1a5' opacity='0.3'/></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;1,400&family=IBM+Plex+Mono:wght@300;400;500&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0a;
            --bg-elevated: #111111;
            --bg-card: #161616;
            --border: #252525;
            --border-hover: #3a3a3a;
            --fg: #f0f0f0;
            --muted: #888888;
            --subtle: #555555;
            --accent: #4fd1a5;
            --accent-dim: rgba(79, 209, 165, 0.1);
            --accent-gold: #c9a962;
            --blue: #8ab4d4;
            --yellow: #d4c88a;
            --pink: #d48aab;
            --red: #d48a8a;
            --green: #4fd1a5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--fg);
            min-height: 100vh;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Password Overlay */
        #auth-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #auth-overlay.hidden { display: none; }

        #auth-overlay input {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--fg);
            padding: 0.75rem 1rem;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9rem;
            width: 200px;
            text-align: center;
            margin-top: 1rem;
            transition: border-color 0.2s;
        }

        #auth-overlay input:focus {
            outline: none;
            border-color: var(--accent);
        }

        #auth-overlay input::placeholder { color: var(--subtle); }

        .auth-title {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-style: italic;
            font-size: 1.4rem;
            color: var(--fg);
            letter-spacing: 0.05em;
        }

        #auth-error {
            color: var(--red);
            font-size: 0.75rem;
            margin-top: 0.5rem;
            height: 1rem;
        }

        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .header-left h1 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-style: italic;
            font-size: 1.4rem;
            font-weight: 400;
            letter-spacing: 0.05em;
            color: var(--fg);
        }
        
        .header-left h1 span {
            color: var(--accent);
            font-style: normal;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            margin-left: 0.75rem;
            letter-spacing: 0.1em;
        }

        .header-left .subtitle {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 0.25rem;
        }

        .header-right {
            text-align: right;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--muted);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 1.5rem;
        }

        /* Panels */
        .panel {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            padding: 1.25rem;
            border-radius: 4px;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .panel-title {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--muted);
        }

        .panel-badge {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.65rem;
            padding: 0.15rem 0.5rem;
            background: var(--accent-dim);
            color: var(--accent);
            border-radius: 2px;
        }

        /* System Status Panel */
        .system-status { grid-column: span 12; }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-card);
            border-radius: 4px;
        }

        .status-icon {
            font-size: 1.25rem;
        }

        .status-content {
            flex: 1;
        }

        .status-label {
            font-size: 0.7rem;
            color: var(--subtle);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .status-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.85rem;
            color: var(--fg);
        }

        /* Usage Bars */
        .usage-panel { grid-column: span 4; }

        .usage-item {
            margin-bottom: 1rem;
        }

        .usage-item:last-child { margin-bottom: 0; }

        .usage-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .usage-label {
            font-size: 0.75rem;
            color: var(--muted);
        }

        .usage-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
            color: var(--fg);
        }

        .usage-bar {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .usage-fill.warning { background: var(--yellow); }
        .usage-fill.danger { background: var(--red); }

        /* Cron Jobs Panel */
        .cron-panel { grid-column: span 4; }

        .cron-list {
            list-style: none;
        }

        .cron-item {
            padding: 0.6rem 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
        }

        .cron-item:last-child { border-bottom: none; }

        .cron-name {
            color: var(--fg);
            margin-bottom: 0.2rem;
        }

        .cron-schedule {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            color: var(--subtle);
        }

        .cron-next {
            font-size: 0.65rem;
            color: var(--muted);
            margin-top: 0.2rem;
        }

        /* Todos Panel */
        .todos-panel { grid-column: span 4; }

        .todo-group {
            margin-bottom: 1rem;
        }

        .todo-group:last-child { margin-bottom: 0; }

        .todo-group-title {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--subtle);
            margin-bottom: 0.5rem;
        }

        .todo-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            padding: 0.4rem 0;
            font-size: 0.8rem;
        }

        .todo-checkbox {
            width: 14px;
            height: 14px;
            border: 1px solid var(--border);
            border-radius: 2px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .todo-text {
            color: var(--muted);
        }

        .todo-deadline {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.65rem;
            color: var(--subtle);
        }

        /* Visibility Toggle */
        .visibility-toggle {
            background: transparent;
            border: none;
            color: var(--muted);
            cursor: pointer;
            padding: 0.25rem;
            margin-left: auto;
            transition: color 0.2s;
        }
        .visibility-toggle:hover { color: var(--accent); }
        .eye-icon { width: 18px; height: 18px; }
        
        .portfolio-value.hidden,
        .account-value.hidden {
            color: var(--subtle);
            letter-spacing: 0.15em;
        }

        /* Portfolio Panel */
        .portfolio-panel { grid-column: span 6; }

        .portfolio-total {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .portfolio-currency {
            flex: 1;
        }

        .portfolio-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--subtle);
            margin-bottom: 0.25rem;
        }

        .portfolio-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1.5rem;
            color: var(--fg);
        }

        .portfolio-accounts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .account-card {
            padding: 0.75rem;
            background: var(--bg-card);
            border-radius: 4px;
        }

        .account-name {
            font-size: 0.7rem;
            color: var(--subtle);
            margin-bottom: 0.25rem;
        }

        .account-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1rem;
        }

        /* Skills Panel */
        .skills-panel { grid-column: span 6; }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }

        .skill-tag {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            padding: 0.4rem 0.6rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 3px;
            color: var(--muted);
            text-align: center;
        }

        /* Kanban Board */
        .kanban-section {
            grid-column: span 12;
            margin-top: 1rem;
        }

        .kanban-header {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--muted);
            margin-bottom: 1rem;
        }

        .kanban {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
        }

        .column {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            padding: 1rem;
            min-height: 300px;
            border-radius: 4px;
        }

        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
        }

        .column-title {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .column-count {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.6rem;
            padding: 0.1rem 0.4rem;
            border-radius: 2px;
        }

        .column.active .column-title { color: var(--fg); }
        .column.active .column-count { background: var(--accent-dim); color: var(--accent); }

        .column.monitoring .column-title { color: var(--fg); }
        .column.monitoring .column-count { background: var(--border); color: var(--muted); }

        .column.internal .column-title { color: var(--fg); }
        .column.internal .column-count { background: var(--border); color: var(--muted); }

        .column.external .column-title { color: var(--fg); }
        .column.external .column-count { background: var(--border); color: var(--muted); }

        .column.completed .column-title { color: var(--subtle); }
        .column.completed .column-count { background: var(--border); color: var(--subtle); }
        .column.completed .card { opacity: 0.4; }

        .column.collapsed { min-height: auto; }
        .column.collapsed .cards-container { display: none; }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 3px;
            transition: border-color 0.2s;
            position: relative;
        }

        .card:hover { border-color: var(--border-hover); }

        .card-title {
            font-size: 0.8rem;
            margin-bottom: 0.25rem;
            padding-right: 1rem;
        }

        .card-desc {
            font-size: 0.7rem;
            color: var(--muted);
            line-height: 1.4;
        }

        .card-meta {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.6rem;
            color: var(--subtle);
            margin-top: 0.5rem;
        }

        .card-delete {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            color: var(--subtle);
            cursor: pointer;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.2s, color 0.2s;
        }

        .card:hover .card-delete { opacity: 1; }
        .card-delete:hover { color: var(--red); }

        /* Log Section */
        .log-section {
            grid-column: span 12;
            margin-top: 1rem;
        }

        .log-header {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--muted);
            margin-bottom: 1rem;
        }

        .log-list {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 0.5rem;
        }

        .log-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 3px;
            font-size: 0.75rem;
        }

        .log-item a {
            color: var(--accent);
            text-decoration: none;
        }

        .log-item a:hover { text-decoration: underline; }

        .log-date {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.65rem;
            color: var(--subtle);
            margin-left: auto;
        }

        /* Footer */
        footer {
            grid-column: span 12;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            font-size: 0.65rem;
            color: var(--subtle);
            display: flex;
            justify-content: space-between;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .kanban { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 900px) {
            .dashboard > * { grid-column: span 12 !important; }
            .kanban { grid-template-columns: repeat(2, 1fr); }
            .skills-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .container { padding: 1rem; }
            .kanban { grid-template-columns: 1fr; }
            header { flex-direction: column; gap: 1rem; }
            .header-right { text-align: left; }
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .status-dot { animation: none; }
        }
    </style>
</head>
<body>
    <!-- Password Protection -->
    <div id="auth-overlay">
        <div class="auth-title">otherwind</div>
        <input type="password" id="password-input" placeholder="password" autocomplete="off" autofocus>
        <div id="auth-error"></div>
    </div>

    <!-- Main Content -->
    <div id="content" style="display: none;">
        <div class="container">
            <header>
                <div class="header-left">
                    <h1>otherwind <span>board</span></h1>
                    <div class="subtitle">rowan's operational view</div>
                </div>
                <div class="header-right">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="current-time"></span>
                    </div>
                </div>
            </header>

            <div class="dashboard">
                <!-- System Status -->
                <section class="panel system-status">
                    <div class="panel-header">
                        <span class="panel-title">System Status</span>
                        <span class="panel-badge">operational</span>
                    </div>
                    <div class="status-grid">
                        <div class="status-item">
                            <span class="status-icon">üíì</span>
                            <div class="status-content">
                                <div class="status-label">Heartbeat</div>
                                <div class="status-value" id="heartbeat-status">Active</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="status-icon">üìß</span>
                            <div class="status-content">
                                <div class="status-label">Email</div>
                                <div class="status-value">Monitoring</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="status-icon">üìÖ</span>
                            <div class="status-content">
                                <div class="status-label">Calendar</div>
                                <div class="status-value">Synced</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="status-icon">üí∞</span>
                            <div class="status-content">
                                <div class="status-label">Portfolio</div>
                                <div class="status-value">Tracking</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Usage -->
                <section class="panel usage-panel">
                    <div class="panel-header">
                        <span class="panel-title">Usage</span>
                    </div>
                    <div id="usage-content"></div>
                </section>

                <!-- Cron Jobs -->
                <section class="panel cron-panel">
                    <div class="panel-header">
                        <span class="panel-title">Scheduled Jobs</span>
                        <span class="panel-badge" id="cron-count">0</span>
                    </div>
                    <ul class="cron-list" id="cron-list"></ul>
                </section>

                <!-- Todos -->
                <section class="panel todos-panel">
                    <div class="panel-header">
                        <span class="panel-title">Todos</span>
                        <span class="panel-badge" id="todo-count">0</span>
                    </div>
                    <div id="todos-content"></div>
                </section>

                <!-- Portfolio -->
                <section class="panel portfolio-panel">
                    <div class="panel-header">
                        <span class="panel-title">Portfolio</span>
                        <button class="visibility-toggle" id="portfolio-visibility" onclick="togglePortfolioVisibility()" title="Show/hide balances">
                            <svg class="eye-icon eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                                <line x1="1" y1="1" x2="23" y2="23"/>
                            </svg>
                            <svg class="eye-icon eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                    </div>
                    <div id="portfolio-content"></div>
                </section>

                <!-- Skills -->
                <section class="panel skills-panel">
                    <div class="panel-header">
                        <span class="panel-title">Capabilities</span>
                    </div>
                    <div class="skills-grid" id="skills-grid"></div>
                </section>

                <!-- Kanban -->
                <section class="kanban-section">
                    <div class="kanban-header">Tasks</div>
                    <div class="kanban" id="kanban"></div>
                </section>

                <!-- Log -->
                <section class="log-section">
                    <div class="log-header">Activity Log</div>
                    <ul class="log-list" id="log"></ul>
                </section>

                <footer>
                    <span>last updated: <span id="last-updated"></span></span>
                    <span>otherwind.xyz</span>
                </footer>
            </div>
        </div>
    </div>

    <script>
        // === PASSWORD PROTECTION ===
        const PASSWORD = 'otherwind2026';
        
        function checkAuth() {
            return sessionStorage.getItem('board-auth') === 'true';
        }

        function authenticate(pwd) {
            if (pwd === PASSWORD) {
                sessionStorage.setItem('board-auth', 'true');
                return true;
            }
            return false;
        }

        // === DATA ===
        const tasks = {
            active: [
                { id: 'active-4', title: 'Board Maintenance', desc: 'Keep board updated with real tasks and usage data', date: '2026-01-27' },
                { id: 'active-5', title: 'Overnight Website Refresh', desc: 'Redesign landing page and dashboard with new features', date: '2026-01-27' }
            ],
            monitoring: [
                { id: 'monitoring-1', title: 'Otherwind Email', desc: 'Checking inbox every 6 hours via cron + heartbeat', date: '2026-01-27' },
                { id: 'monitoring-2', title: 'Usage Tracking', desc: 'Auto-update Claude/Cursor usage every 4 hours', date: '2026-01-27' },
                { id: 'monitoring-3', title: 'Nadim Calendar', desc: 'Check gcal every 4 hours, track upcoming/past meetings, alert if <2h', date: '2026-01-27' },
                { id: 'monitoring-4', title: 'IBKR Daily Snapshot', desc: 'Portfolio snapshot at 9pm UK daily, tracking P&L over time', date: '2026-01-27' },
                { id: 'monitoring-5', title: 'Todo Review', desc: 'Daily 9am review of pending todos', date: '2026-01-27' }
            ],
            internal: [
                { id: 'internal-1', title: 'Metalend Call Prep', desc: 'Research and prep notes for bizdev call', date: '2026-01-27' }
            ],
            external: [
                { id: 'external-1', title: 'Equity Inquiry', desc: 'From: nadim@centrifuge.io ‚Äî Asking about Otherwind and who to talk to. Replied "will be in touch". Awaiting decision on follow-up.', date: '2026-01-27' }
            ],
            completed: [
                { id: 'completed-13', title: 'Shape Builder Tool', desc: 'Interactive shape playground at /shapes - 9 shapes, 6 textures, custom colors, randomizer, save presets', date: '2026-01-27' },
                { id: 'completed-12', title: 'Todo System Setup', desc: 'Created todo tracking with daily 9am review cron', date: '2026-01-27' },
                { id: 'completed-11', title: 'IBKR Portfolio Tracking', desc: 'Set up Flex Query API for both accounts (GBP ISA + USD), created skill, combined snapshot with P&L tracking', date: '2026-01-27' },
                { id: 'completed-10', title: 'Calendar + Granola Setup', desc: 'Added gcal read access (iCal), set up meeting notes workflow from Granola links', date: '2026-01-27' },
                { id: 'completed-9', title: 'Email Protocol Fix', desc: 'Re-sent proper professional replies, added safeguard against double-sends', date: '2026-01-27' },
                { id: 'completed-8', title: 'Email Replies', desc: 'Replied to 3 emails (hello, hey king, Equity inquiry)', date: '2026-01-27' },
                { id: 'completed-1', title: 'GitHub Pages Setup', desc: 'Site deployed to rowanclawd-alt.github.io/otherwind', date: '2026-01-27' },
                { id: 'completed-2', title: 'Porkbun DNS Config', desc: 'A records + CNAME configured for GitHub Pages', date: '2026-01-27' },
                { id: 'completed-3', title: 'Email Hosting', desc: 'rowan@otherwind.xyz created via Porkbun', date: '2026-01-27' },
                { id: 'completed-4', title: 'Email Protocol', desc: 'Security rules + monitoring setup documented', date: '2026-01-27' },
                { id: 'completed-5', title: 'Kanban Board', desc: 'Built task board with password protection', date: '2026-01-27' },
                { id: 'completed-6', title: 'DNS Propagation', desc: 'otherwind.xyz fully propagated', date: '2026-01-27' },
                { id: 'completed-7', title: 'Cron Jobs Setup', desc: 'Email check (6h) + usage update (4h) scheduled', date: '2026-01-27' }
            ]
        };

        const usage = {
            claude: { dailyLeft: 100, weeklyLeft: 89, updated: '2026-01-28 08:00' },
            cursor: { status: 'active', creditsUsed: 15, updated: '2026-01-27 21:53' }
        };

        const cronJobs = [
            { name: 'Board Usage Update', schedule: 'Every 4 hours', next: '00:00' },
            { name: 'Calendar Check', schedule: 'Every 4 hours', next: '00:00' },
            { name: 'Email Check', schedule: 'Every 6 hours', next: '00:00' },
            { name: 'IBKR Snapshot', schedule: 'Daily 9pm', next: '21:00' },
            { name: 'Todo Review', schedule: 'Daily 9am', next: '09:00 tomorrow' }
        ];

        const todos = {
            tomorrow: [
                { task: 'Ping team', deadline: '2026-01-28' }
            ],
            thisWeek: [
                { task: 'Get back to Resolv on DDQ', deadline: '2026-01-30' }
            ],
            noDeadline: [
                { task: 'Chat with Adam re: Keyring DD', context: 'Tagged in gdoc' }
            ]
        };

        const portfolio = {
            combined: { gbp: 27273.93, usd: 37310.75 },
            accounts: [
                { name: 'GBP ISA', value: '¬£19,954.28', positions: 'VUAG, VWRP' },
                { name: 'USD Account', value: '$10,013.29', positions: 'Cash' }
            ],
            updated: '2026-01-27 19:12'
        };

        const skills = [
            'Email Handling', 'Calendar Sync', 'Portfolio Tracking',
            'Todo Management', 'Web Development', 'GitHub Integration',
            'Cron Scheduling', 'Meeting Notes', 'Research'
        ];

        const log = [
            { id: 'log-17', title: 'Competitor analysis report (AI-led companies)', url: null, date: '2026-01-27' },
            { id: 'log-16', title: 'VC pitch deck created and emailed', url: null, date: '2026-01-27' },
            { id: 'log-15', title: 'Client teaser deck created and emailed', url: null, date: '2026-01-27' },
            { id: 'log-14', title: 'Portfolio visibility toggle added to board', url: null, date: '2026-01-27' },
            { id: 'log-13', title: 'Favicons added (board + shapes)', url: null, date: '2026-01-27' },
            { id: 'log-12', title: 'Shape builder v2: 12 geometries, 6 textures, 12 palettes, effects, animations', url: 'https://otherwind.xyz/shapes.html', date: '2026-01-27' },
            { id: 'log-11', title: 'Shape builder tool launched', url: 'https://otherwind.xyz/shapes.html', date: '2026-01-27' },
            { id: 'log-10', title: 'Todo system created', url: null, date: '2026-01-27' },
            { id: 'log-9', title: 'IBKR skill + daily snapshot cron created', url: null, date: '2026-01-27' },
            { id: 'log-8', title: 'Saved Circle/Arc meeting notes from Granola', url: null, date: '2026-01-27' },
            { id: 'log-7', title: 'Logged equity inquiry to requests', url: null, date: '2026-01-27' },
            { id: 'log-6', title: 'Replied to 3 emails', url: null, date: '2026-01-27' },
            { id: 'log-5', title: 'Board updated with real usage data', url: null, date: '2026-01-27' },
            { id: 'log-4', title: 'Cron jobs configured (email + usage)', url: null, date: '2026-01-27' },
            { id: 'log-3', title: 'Email hosting activated', url: null, date: '2026-01-27' },
            { id: 'log-2', title: 'DNS configured for otherwind.xyz', url: null, date: '2026-01-27' },
            { id: 'log-1', title: 'Board launched', url: 'https://otherwind.xyz/board.html', date: '2026-01-27' }
        ];

        // === UTILITIES ===
        function getDeletedItems() {
            const deleted = localStorage.getItem('board-deleted');
            return deleted ? JSON.parse(deleted) : [];
        }

        function deleteItem(itemId) {
            const deleted = getDeletedItems();
            if (!deleted.includes(itemId)) {
                deleted.push(itemId);
                localStorage.setItem('board-deleted', JSON.stringify(deleted));
            }
            renderAll();
        }

        function getCollapsedColumns() {
            const stored = localStorage.getItem('board-collapsed');
            return stored ? JSON.parse(stored) : ['completed'];
        }

        function toggleColumn(key) {
            const collapsed = getCollapsedColumns();
            const idx = collapsed.indexOf(key);
            if (idx > -1) collapsed.splice(idx, 1);
            else collapsed.push(key);
            localStorage.setItem('board-collapsed', JSON.stringify(collapsed));
            renderKanban();
        }

        // === RENDER FUNCTIONS ===
        function renderUsage() {
            const el = document.getElementById('usage-content');
            const claudeClass = usage.claude.dailyLeft < 20 ? 'danger' : usage.claude.dailyLeft < 50 ? 'warning' : '';
            
            el.innerHTML = `
                <div class="usage-item">
                    <div class="usage-header">
                        <span class="usage-label">Claude Daily</span>
                        <span class="usage-value">${usage.claude.dailyLeft}% remaining</span>
                    </div>
                    <div class="usage-bar"><div class="usage-fill ${claudeClass}" style="width: ${usage.claude.dailyLeft}%"></div></div>
                </div>
                <div class="usage-item">
                    <div class="usage-header">
                        <span class="usage-label">Claude Weekly</span>
                        <span class="usage-value">${usage.claude.weeklyLeft}% remaining</span>
                    </div>
                    <div class="usage-bar"><div class="usage-fill" style="width: ${usage.claude.weeklyLeft}%"></div></div>
                </div>
                <div class="usage-item">
                    <div class="usage-header">
                        <span class="usage-label">Cursor</span>
                        <span class="usage-value">${usage.cursor.status}</span>
                    </div>
                </div>
            `;
        }

        function renderCronJobs() {
            const list = document.getElementById('cron-list');
            document.getElementById('cron-count').textContent = cronJobs.length;
            
            list.innerHTML = cronJobs.map(job => `
                <li class="cron-item">
                    <div class="cron-name">${job.name}</div>
                    <div class="cron-schedule">${job.schedule}</div>
                    <div class="cron-next">Next: ${job.next}</div>
                </li>
            `).join('');
        }

        function renderTodos() {
            const el = document.getElementById('todos-content');
            const total = todos.tomorrow.length + todos.thisWeek.length + todos.noDeadline.length;
            document.getElementById('todo-count').textContent = total;

            let html = '';
            
            if (todos.tomorrow.length > 0) {
                html += `<div class="todo-group">
                    <div class="todo-group-title">Tomorrow</div>
                    ${todos.tomorrow.map(t => `
                        <div class="todo-item">
                            <div class="todo-checkbox"></div>
                            <div>
                                <div class="todo-text">${t.task}</div>
                                <div class="todo-deadline">${t.deadline}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>`;
            }

            if (todos.thisWeek.length > 0) {
                html += `<div class="todo-group">
                    <div class="todo-group-title">This Week</div>
                    ${todos.thisWeek.map(t => `
                        <div class="todo-item">
                            <div class="todo-checkbox"></div>
                            <div>
                                <div class="todo-text">${t.task}</div>
                                <div class="todo-deadline">${t.deadline}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>`;
            }

            if (todos.noDeadline.length > 0) {
                html += `<div class="todo-group">
                    <div class="todo-group-title">No Deadline</div>
                    ${todos.noDeadline.map(t => `
                        <div class="todo-item">
                            <div class="todo-checkbox"></div>
                            <div>
                                <div class="todo-text">${t.task}</div>
                                ${t.context ? `<div class="todo-deadline">${t.context}</div>` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>`;
            }

            el.innerHTML = html || '<div style="color: var(--muted); font-size: 0.8rem;">No todos üëç</div>';
        }

        let portfolioVisible = false; // Hidden by default
        
        function togglePortfolioVisibility() {
            portfolioVisible = !portfolioVisible;
            const btn = document.getElementById('portfolio-visibility');
            btn.querySelector('.eye-closed').style.display = portfolioVisible ? 'none' : 'block';
            btn.querySelector('.eye-open').style.display = portfolioVisible ? 'block' : 'none';
            renderPortfolio();
        }
        
        function maskValue(value) {
            return '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        }
        
        function renderPortfolio() {
            const el = document.getElementById('portfolio-content');
            const hiddenClass = portfolioVisible ? '' : 'hidden';
            const gbpDisplay = portfolioVisible ? `¬£${portfolio.combined.gbp.toLocaleString()}` : maskValue();
            const usdDisplay = portfolioVisible ? `$${portfolio.combined.usd.toLocaleString()}` : maskValue();
            
            el.innerHTML = `
                <div class="portfolio-total">
                    <div class="portfolio-currency">
                        <div class="portfolio-label">Combined (GBP)</div>
                        <div class="portfolio-value ${hiddenClass}">${gbpDisplay}</div>
                    </div>
                    <div class="portfolio-currency">
                        <div class="portfolio-label">Combined (USD)</div>
                        <div class="portfolio-value ${hiddenClass}">${usdDisplay}</div>
                    </div>
                </div>
                <div class="portfolio-accounts">
                    ${portfolio.accounts.map(acc => `
                        <div class="account-card">
                            <div class="account-name">${acc.name}</div>
                            <div class="account-value ${hiddenClass}">${portfolioVisible ? acc.value : maskValue()}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderSkills() {
            const grid = document.getElementById('skills-grid');
            grid.innerHTML = skills.map(skill => `<div class="skill-tag">${skill}</div>`).join('');
        }

        function renderKanban() {
            const kanban = document.getElementById('kanban');
            const deleted = getDeletedItems();
            const collapsed = getCollapsedColumns();
            
            const columns = [
                { key: 'active', label: 'Active', class: 'active' },
                { key: 'monitoring', label: 'Monitoring', class: 'monitoring' },
                { key: 'internal', label: 'Internal', class: 'internal' },
                { key: 'external', label: 'External', class: 'external' },
                { key: 'completed', label: 'Completed', class: 'completed' }
            ];

            kanban.innerHTML = columns.map(col => {
                const visibleTasks = tasks[col.key].filter(t => !deleted.includes(t.id));
                const isCollapsed = collapsed.includes(col.key);
                
                return `
                    <div class="column ${col.class}${isCollapsed ? ' collapsed' : ''}">
                        <div class="column-header" onclick="toggleColumn('${col.key}')">
                            <span class="column-title">${col.label}</span>
                            <span class="column-count">${visibleTasks.length}</span>
                        </div>
                        <div class="cards-container">
                            ${visibleTasks.map(task => `
                                <div class="card">
                                    <button class="card-delete" onclick="event.stopPropagation(); deleteItem('${task.id}')" aria-label="Delete">√ó</button>
                                    <div class="card-title">${task.title}</div>
                                    <div class="card-desc">${task.desc}</div>
                                    ${task.date ? `<div class="card-meta">${task.date}</div>` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderLog() {
            const logList = document.getElementById('log');
            const deleted = getDeletedItems();
            const visibleLogs = log.filter(l => !deleted.includes(l.id));
            
            logList.innerHTML = visibleLogs.map(entry => `
                <li class="log-item">
                    ${entry.url 
                        ? `<a href="${entry.url}" target="_blank">${entry.title}</a>` 
                        : `<span>${entry.title}</span>`}
                    <span class="log-date">${entry.date}</span>
                </li>
            `).join('');
        }

        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });
            const dateStr = now.toLocaleDateString('en-GB', { weekday: 'short', day: 'numeric', month: 'short' });
            document.getElementById('current-time').textContent = `${dateStr} ${timeStr}`;
        }

        function renderAll() {
            renderUsage();
            renderCronJobs();
            renderTodos();
            renderPortfolio();
            renderSkills();
            renderKanban();
            renderLog();
            document.getElementById('last-updated').textContent = new Date().toISOString().split('T')[0];
            updateTime();
        }

        // === INIT ===
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('auth-overlay');
            const content = document.getElementById('content');
            const input = document.getElementById('password-input');
            const error = document.getElementById('auth-error');

            if (checkAuth()) {
                overlay.classList.add('hidden');
                content.style.display = 'block';
                renderAll();
                setInterval(updateTime, 60000);
            }

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    if (authenticate(input.value)) {
                        overlay.classList.add('hidden');
                        content.style.display = 'block';
                        renderAll();
                        setInterval(updateTime, 60000);
                    } else {
                        error.textContent = 'incorrect';
                        input.value = '';
                    }
                }
            });
        });
    </script>
</body>
</html>
